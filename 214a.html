<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-lang-key="appTitle">рд╡рд┐рдЬрд╝реБрдЕрд▓ рд╢реАрдЯ рд▓реЗрдЖрдЙрдЯ рдХреИрд▓рдХреБрд▓реЗрдЯрд░</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
        <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="loadingIndicator">
        <div data-lang-key="loadingPdf">PDF рдмрди рд░рд╣рд╛ рд╣реИ, рдХреГрдкрдпрд╛ рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░реЗрдВ...</div>
    </div>
    <header class="app-header">
        <div class="title" data-lang-key="headerTitle">рд╢реАрдЯ рд▓реЗрдЖрдЙрдЯ</div>
        <div class="header-icons">
            <button id="manageProjectsIcon" title="рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореИрдиреЗрдЬ рдХрд░реЗрдВ / Manage Projects" onclick="showProjectManagementModal()">ЁЯЧВя╕П</button>
            <button id="showOffcutsLibraryIcon" title="рдСрдлрдХрдЯ рд▓рд╛рдЗрдмреНрд░реЗрд░реА / Offcut Library" onclick="showOffcutsLibraryModal()">ЁЯзй</button>
            <button id="unitSettingsIcon" title="рдпреВрдирд┐рдЯ рдмрджрд▓реЗрдВ / Change Unit" onclick="showUnitSettingsModal()">ЁЯУП</button>
            <button id="langToggle" title="рднрд╛рд╖рд╛ рдмрджрд▓реЗрдВ / Change Language" onclick="toggleLanguage()">ЁЯМР</button>
            <div class="dropdown-container no-print">
                <button id="sharePdfExcelButton" title="рд╢реЗрдпрд░ рдХрд░реЗрдВ / Share" onclick="toggleDropdownMenu(event, 'sharePdfExcelMenu')">
                    ЁЯУд <small data-lang-key="shareBtn">рд╢реЗрдпрд░</small>
                </button>
                <div id="sharePdfExcelMenu" class="dropdown-menu">
                    <a href="#" onclick="prepareAndPrint(); closeAllDropdowns();" data-lang-key="printPdfBtnMenu">PDF рдХреЗ рд░реВрдк рдореЗрдВ рдкреНрд░рд┐рдВрдЯ рдХрд░реЗрдВ</a>
                </div>
            </div>
            <button id="sheetSettingsIcon" title="рд╢реАрдЯ рд╕реЗрдЯрд┐рдВрдЧреНрд╕" onclick="showSheetSettingsModal()">тЪЩя╕П</button>
            <button id="historyIcon" title="рд╣рд┐рд╕реНрдЯреНрд░реА" onclick="showHistoryModal()">ЁЯУЬ</button>
            <div class="dropdown-container no-print">
                <button id="jsonIcon" title="JSON рдСрдкрд░реЗрд╢рдиреНрд╕" onclick="toggleDropdownMenu(event, 'jsonMenu')">ЁЯТ╛</button>
                <div id="jsonMenu" class="dropdown-menu">
                    <a href="#" onclick="exportDataAsJson(); closeAllDropdowns();" data-lang-key="exportJson">JSON рдПрдХреНрд╕рдкреЛрд░реНрдЯ рдХрд░реЗрдВ</a>
                    <label for="importJsonInputHidden" class="dropdown-menu-item" data-lang-key="importJson">JSON рдЗрдореНрдкреЛрд░реНрдЯ рдХрд░реЗрдВ</label>
                    <input type="file" id="importJsonInputHidden" accept=".json" style="display: none;" onchange="importDataFromJson(event); closeAllDropdowns();">
                    <a href="#" onclick="exportPiecesToCsv(); closeAllDropdowns();" data-lang-key="exportPiecesCsv">рдкреАрд╕ рд▓рд┐рд╕реНрдЯ CSV рдПрдХреНрд╕рдкреЛрд░реНрдЯ</a>
                    <a href="#" onclick="exportLayoutToCsv(); closeAllDropdowns();" data-lang-key="exportLayoutCsv">рд▓реЗрдЖрдЙрдЯ CSV рдПрдХреНрд╕рдкреЛрд░реНрдЯ</a>
                    <a href="#" onclick="clearSavedData(); closeAllDropdowns();" data-lang-key="clearSavedData">рд╕реЗрд╡ рдбреЗрдЯрд╛ рдХреНрд▓рд┐рдпрд░ рдХрд░реЗрдВ</a>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="parts-group">
            <h2 data-lang-key="addPieceTitle">рдкреАрд╕ рдЬреЛрдбрд╝реЗрдВ</h2>
            <div>
                <input type="text" id="partName" data-lang-placeholder-key="pieceNameLabel" style="margin-bottom: 10px; width: 100%;">
            </div>
            <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 15px;">
                <div style="flex: 1 1 100px; min-width: 80px;">
                    <input type="number" id="partWidth" step="any"
                           data-lang-placeholder-key="pieceWidthLabel"
                           style="margin-bottom: 0; width: 100%;">
                </div>
                <div style="flex: 1 1 100px; min-width: 80px;">
                    <input type="number" id="partLength" step="any"
                           data-lang-placeholder-key="pieceLengthLabel"
                           style="margin-bottom: 0; width: 100%;">
                </div>
                 <div style="flex: 1 1 80px; min-width: 60px;">
                    <input type="number" id="partQuantity" min="1" data-lang-placeholder-key="pieceQuantityLabel" style="margin-bottom: 0; width: 100%;">
                </div>
            </div>
            <div class="edge-banding-controls">
                <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: nowrap; gap: 5px; margin-bottom: 5px;">
                    <button id="btnEdgeL1" class="edge-tape-btn" onclick="toggleEdgeTape('L1', this)" data-edge="L1" data-lang-key="edgeTapeL1Btn">L1</button>
                    <button id="btnEdgeL2" class="edge-tape-btn" onclick="toggleEdgeTape('L2', this)" data-edge="L2" data-lang-key="edgeTapeL2Btn">L2</button>
                    <button id="btnEdgeW1" class="edge-tape-btn" onclick="toggleEdgeTape('W1', this)" data-edge="W1" data-lang-key="edgeTapeW1Btn">W1</button>
                    <button id="btnEdgeW2" class="edge-tape-btn" onclick="toggleEdgeTape('W2', this)" data-edge="W2" data-lang-key="edgeTapeW2Btn">W2</button>
                    <button id="btnEdgeAll" class="edge-tape-btn all" onclick="toggleEdgeTape('All', this)" data-lang-title="toggleAllEdgesTooltip" title="рд╕рднреА рдХрд┐рдирд╛рд░реЛрдВ рдкрд░ рдЯреЗрдк рд▓рдЧрд╛рдПрдВ/рд╣рдЯрд╛рдПрдВ">ЁЯФД</button>
                </div>
                <div id="selectedEdgesDisplay">
                    <span data-lang-key="selectedEdgesPrefix">рдЪрдпрдирд┐рдд:</span> <span id="currentSelectedEdgesText" data-lang-key="noneLabel">рдХреЛрдИ рдирд╣реАрдВ</span>
                </div>
            </div>
            <button onclick="addPiece()" data-lang-key="addPieceBtn" style="margin-top:20px; width:100%;">рдкреАрд╕ рдЬреЛрдбрд╝реЗрдВ</button>
        </div>

        <div class="input-group" id="addedPiecesSection">
            <h2 data-lang-key="addedPiecesTitle">рдЬреЛрдбрд╝реЗ рдЧрдП рдкреАрд╕</h2>
            <div class="project-details-inputs printable-section">
                <label for="projectLocation" data-lang-key="projectLocationLabel">рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд▓реЛрдХреЗрд╢рди/рдХреНрд▓рд╛рдЗрдВрдЯ:</label>
                <input type="text" id="projectLocation" data-lang-placeholder="projectLocationPlaceholder">
                <label for="projectNotes" data-lang-key="projectNotesLabel">рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдиреЛрдЯреНрд╕:</label>
                <textarea id="projectNotes" rows="3" data-lang-placeholder="projectNotesPlaceholder"></textarea>
            </div>
            <hr class="printable-section" style="margin-bottom: 20px;">
            <table id="piecesTable">
                <thead>
                    <tr>
                        <th data-lang-key="tableName">рдирд╛рдо</th>
                        <th><span data-lang-key="tableWidth">рдЪреМрдбрд╝рд╛рдИ</span> (<span class="unit-display">cm</span>)</th>
                        <th><span data-lang-key="tableLength">рд▓рдВрдмрд╛рдИ</span> (<span class="unit-display">cm</span>)</th>
                        <th data-lang-key="tableQuantity">рд╕рдВрдЦреНрдпрд╛</th>
                        <th data-lang-key="tableEdges">рдПрдЬ рдЯреЗрдк</th>
                        <th data-lang-key="tableAllowRotationOnGrained" class="no-print">рдЧреНрд░реЗрди рдкрд░ рдШреБрдорд╛рдПрдБ?</th>
                        <th class="no-print" data-lang-key="tableRemove">рд╣рдЯрд╛рдПрдВ</th>
                    </tr>
                </thead>
                <tbody></tbody>
                <tfoot>
                    <tr id="piecesTableSummaryRow" class="table-summary-row" style="display: none;">
                        <td colspan="3" data-lang-key="totalPiecesInList">рдХреБрд▓ рдкреАрд╕ рд▓рд┐рд╕реНрдЯ рдореЗрдВ:</td>
                        <td id="totalPiecesInListCount">0</td>
                        <td></td>
                        <td class="no-print"></td>
                        <td class="no-print"></td>
                    </tr>
                </tfoot>
            </table>
            <div id="totalEdgeBandingReport" style="margin-top: 15px; padding-top: 10px; border-top: 1px solid #eee; display:none;">
                <h4 data-lang-key="totalEdgeBandingTitle">рдХреБрд▓ рдПрдЬ рдЯреЗрдк рдЖрд╡рд╢реНрдпрдХ:</h4>
                <p id="totalEdgeBandingLengthDisplay"></p>
            </div>
        </div>

        <div class="fitting-strategy-group">
            <div class="controls-row">
                <div class="checkbox-area">
                    <input type="checkbox" id="useOffcutsCheckbox">
                    <label for="useOffcutsCheckbox" data-lang-key="useSavedOffcutsLabel">рд╕рд╣реЗрдЬреЗ рдЧрдП рдСрдлрдХрдЯреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ</label>
                </div>
                <div class="strategy-select-area">
                    <label for="fittingStrategySelector" data-lang-key="fittingStrategyLabel">рдлрд┐рдЯрд┐рдВрдЧ рд░рдгрдиреАрддрд┐ рдЪреБрдиреЗрдВ:</label>
                    <select id="fittingStrategySelector">
                        <option value="defaultScore" data-lang-key="strategyDefaultScore">рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╕реНрдХреЛрд░ рдЖрдзрд╛рд░рд┐рдд (рдмрдбрд╝реЗ рдкреАрд╕ рдкрд╣рд▓реЗ)</option>
                        <option value="minWastageArea" data-lang-key="strategyMinWastage">рдиреНрдпреВрдирддрдо рд╡реНрдпрд░реНрде рдХреНрд╖реЗрддреНрд░</option>
                        <option value="firstFit" data-lang-key="strategyFirstFit">рдлрд░реНрд╕реНрдЯ рдлрд┐рдЯ (рд╕рдмрд╕реЗ рддреЗрдЬрд╝)</option>
                        <option value="worstFit" data-lang-key="strategyWorstFit">рд╡рд░реНрд╕реНрдЯ рдлрд┐рдЯ (рдЕрдзрд┐рдХ рд╡реНрдпрд░реНрде рдХреНрд╖реЗрддреНрд░)</option>
                        <option value="bottomLeftFreeRect" data-lang-key="strategyBottomLeftFree">рдЦрд╛рд▓реА рдЖрдпрдд (рдмреЙрдЯрдо-рд▓реЗрдлреНрдЯ рдкреНрд░рд╛рдердорд┐рдХрддрд╛)</option>
                        <option value="sortPiecesByPerimeterDesc" data-lang-key="strategySortPiecePerimeterDesc">рдкреАрд╕: рдкрд░рд┐рдзрд┐ (рдмрдбрд╝реЗ рдкрд╣рд▓реЗ)</option>
                        <option value="sortPiecesByLongestSideDesc" data-lang-key="strategySortPieceLongestSideDesc">рдкреАрд╕: рд╕рдмрд╕реЗ рд▓рдВрдмреА рднреБрдЬрд╛ рдкрд╣рд▓реЗ</option>
                        <option value="sortPiecesByShortestSideAsc" data-lang-key="strategySortPieceShortestSideAsc">рдкреАрд╕: рд╕рдмрд╕реЗ рдЫреЛрдЯреА рднреБрдЬрд╛ рдкрд╣рд▓реЗ</option>
                        <option value="sortPiecesByWidthDesc" data-lang-key="strategySortPieceWidthDesc">рдкреАрд╕: рдЪреМрдбрд╝рд╛рдИ (рдмрдбрд╝реЗ рдкрд╣рд▓реЗ)</option>
                        <option value="sortPiecesByHeightDesc" data-lang-key="strategySortPieceHeightDesc">рдкреАрд╕: рдКрдВрдЪрд╛рдИ/рд▓рдВрдмрд╛рдИ (рдмрдбрд╝реЗ рдкрд╣рд▓реЗ)</option>
                        <option value="sortPiecesByAreaAsc" data-lang-key="strategySortPieceAreaAsc">рдкреАрд╕: рдХреНрд╖реЗрддреНрд░рдлрд▓ (рдЫреЛрдЯреЗ рдкрд╣рд▓реЗ)</option>
                        <option value="bfdh" data-lang-key="strategyBFDH">BFDH (рдКрдВрдЪрд╛рдИ рдкрд╣рд▓реЗ, рд╢реЗрд▓реНрдл рдХреНрд╖реИрддрд┐рдЬ)</option>
                        <option value="bfdw" data-lang-key="strategyBFDW">BFDW (рдЪреМрдбрд╝рд╛рдИ рдкрд╣рд▓реЗ, рд╢реЗрд▓реНрдл рдКрд░реНрдзреНрд╡рд╛рдзрд░)</option>
                    </select>
                </div>
            </div>
             <div class="actions-div" id="mainActionButtons">
                <button id="resetButton" onclick="resetAll()" data-lang-key="resetCurrentBtn">рд░реАрд╕реЗрдЯ (рд╡рд░реНрддрдорд╛рди)</button>
                <button onclick="calculateAndDrawLayout()" data-lang-key="calculateLayoutBtnUnified">рд▓реЗрдЖрдЙрдЯ рдХреА рдЧрдгрдирд╛ рдХрд░реЗрдВ</button>
            </div>
        </div>

        <div class="results-group">
            <h2 data-lang-key="resultsTitle">рдкрд░рд┐рдгрд╛рдо</h2>
            <div class="results-summary" id="resultsSummary" data-lang-key="totalSheetsDefault">рдХреБрд▓ рдЖрд╡рд╢реНрдпрдХ рд╢реАрдЯреНрд╕: 0</div>
            <div class="sheets-container" id="sheetsContainer">
            </div>
            <div class="wastage-section" id="wastageSection" style="display:none;">
                 <h3 data-lang-key="wastageReportTitle">рд╡реЗрд╕реНрдЯреЗрдЬ рд░рд┐рдкреЛрд░реНрдЯ</h3>
                 <ul id="wastageOverallStats" style="list-style-type: none; padding-left: 0; margin-top:0;"></ul>
                 <hr style="margin: 10px 0; border-color: #eee;">
                 <div class="useful-offcuts-summary" id="usefulOffcutsSummary" style="display:none; margin-bottom: 5px;"></div>
                 <div class="wastage-list" id="usefulOffcutsDisplayListContainer" style="border: 1px solid #eee; padding:5px; margin-bottom:10px;">
                 </div>
                 <div id="usefulOffcutsListTotalSummary"></div>
                 <div id="otherSmallWastageContainer">
                 </div>
                 <div class="wastage-list-summary" id="totalWastagePiecesSummary" style="display:none; margin-top:10px;"></div>
            </div>
        </div>
    </div>

    <div id="unitSettingsModal" class="modal">
        <div class="unit-modal-content">
            <span class="close-button" onclick="closeUnitSettingsModal()">├Ч</span>
            <h2 data-lang-key="unitSettingsTitle">рдпреВрдирд┐рдЯ рд╕реЗрдЯрд┐рдВрдЧреНрд╕</h2>
            <label for="currentUnitSelector" data-lang-key="selectUnitLabel">рд╡рд░реНрддрдорд╛рди рдпреВрдирд┐рдЯ рдЪреБрдиреЗрдВ:</label>
            <select id="currentUnitSelector">
                <option value="cm">рд╕реЗрдВрдЯреАрдореАрдЯрд░ (cm)</option>
                <option value="mm">рдорд┐рд▓реАрдореАрдЯрд░ (mm)</option>
                <option value="m">рдореАрдЯрд░ (m)</option>
                <option value="ft">рдлреБрдЯ (ft)</option>
                <option value="in">рдЗрдВрдЪ (in)</option>
            </select>
            <button onclick="applyUnitChange()" style="width:100%;" data-lang-key="applyBtn">рд▓рд╛рдЧреВ рдХрд░реЗрдВ</button>
        </div>
    </div>

    <div id="sheetSettingsModal" class="modal">
        <div class="sheet-size-modal-content">
            <span class="close-button" onclick="closeSheetSettingsModal()">├Ч</span>
            <h2 data-lang-key="sheetSettingsTitle">рд╢реАрдЯ рд╕реЗрдЯрд┐рдВрдЧреНрд╕</h2>
            <label for="modalSheetName" data-lang-key="sheetNameLabel">рд╢реАрдЯ рдХрд╛ рдирд╛рдо (рд╡реИрдХрд▓реНрдкрд┐рдХ):</label>
            <input type="text" id="modalSheetName" data-lang-placeholder="sheetNamePlaceholder" style="margin-bottom: 10px;">
            <label for="modalSheetWidth"><span data-lang-key="sheetWidthLabel">рд╢реАрдЯ рдХреА рдЪреМрдбрд╝рд╛рдИ</span> (<span class="unit-display">cm</span>):</label>
            <input type="number" id="modalSheetWidth" value="122" step="any" style="margin-bottom: 10px;">
            <label for="modalSheetLength"><span data-lang-key="sheetLengthGrainLabel">рд╢реАрдЯ рдХреА рд▓рдВрдмрд╛рдИ (рдЧреНрд░реЗрди)</span> (<span class="unit-display">cm</span>):</label>
            <input type="number" id="modalSheetLength" value="244" step="any" style="margin-bottom: 10px;">
            <div style="margin-bottom: 10px;">
                <label for="modalSheetCost" data-lang-key="sheetCostLabel">рдкреНрд░рддрд┐ рд╢реАрдЯ рд▓рд╛рдЧрдд:</label>
                <input type="number" id="modalSheetCost" step="any" data-lang-placeholder="sheetCostPlaceholder">
            </div>
            <div style="margin-bottom: 10px;">
                <label for="modalKerfWidth" data-lang-key="kerfWidthLabel">рдХреЗрд░рдлрд╝/рдмреНрд▓реЗрдб рдХреА рдореЛрдЯрд╛рдИ (<span class="unit-display">cm</span>):</label>
                <input type="number" id="modalKerfWidth" step="any" value="0.3" data-lang-placeholder="kerfWidthPlaceholder">
            </div>
            <div style="margin-bottom: 15px;">
                <input type="checkbox" id="modalHasGrainDirection" checked>
                <label for="modalHasGrainDirection" style="display: inline-block; margin-bottom: 0; font-weight:normal;" data-lang-key="respectGrainLabel">рдЧреНрд░реЗрди рдХреА рджрд┐рд╢рд╛ рдХрд╛ рдзреНрдпрд╛рди рд░рдЦреЗрдВ</label>
            </div>
            <div style="margin-top:10px;">
                <label for="modalGrainColor" data-lang-key="grainColorLabel">рдЧреНрд░реЗрди рдХрд╛ рд░рдВрдЧ:</label>
                <select id="modalGrainColor">
                    <option value="rgba(0,0,0,0.08)" data-lang-key="grainGray">рд╣рд▓реНрдХрд╛ рдЧреНрд░реЗ</option>
                    <option value="rgba(160,82,45,0.1)" data-lang-key="grainLightBrown">рд╣рд▓реНрдХрд╛ рднреВрд░рд╛</option>
                    <option value="rgba(139,69,19,0.1)" data-lang-key="grainDarkBrown">рдЧрд╣рд░рд╛ рднреВрд░рд╛</option>
                    <option value="rgba(210,180,140,0.1)" data-lang-key="grainTan">рдЯреИрди</option>
                    <option value="none" data-lang-key="grainNone">рдХреЛрдИ рдЧреНрд░реЗрди рдирд╣реАрдВ</option>
                </select>
            </div>
            <div style="margin-top:10px;">
                <label for="modalGrainPattern" data-lang-key="grainPatternLabel">рдЧреНрд░реЗрди рдкреИрдЯрд░реНрди:</label>
                <select id="modalGrainPattern">
                    <option value="fine" data-lang-key="grainFine">рдорд╣реАрди</option>
                    <option value="medium" data-lang-key="grainMedium">рдордзреНрдпрдо</option>
                    <option value="coarse" data-lang-key="grainCoarse">рдмрдбрд╝рд╛/рдореЛрдЯрд╛</option>
                </select>
            </div>
            <div class="offcut-settings-group" style="margin-top:10px; padding: 10px 0 0 0; border:none; background:none;">
                <h4 data-lang-key="offcutSettingsTitle" style="margin-bottom:5px; font-size:1em;">рдСрдлрдХрдЯ рд╕реЗрдЯрд┐рдВрдЧреНрд╕</h4>
                <label for="minOffcutWidth" data-lang-key="minOffcutWidthLabel">рдиреНрдпреВрдирддрдо рдСрдлрдХрдЯ рдЪреМрдбрд╝рд╛рдИ (<span class="unit-display">cm</span>):</label>
                <input type="number" id="minOffcutWidth" value="10" step="any">
                <label for="minOffcutLength" data-lang-key="minOffcutLengthLabel">рдиреНрдпреВрдирддрдо рдСрдлрдХрдЯ рд▓рдВрдмрд╛рдИ (<span class="unit-display">cm</span>):</label>
                <input type="number" id="minOffcutLength" value="45" step="any">
            </div>
            <button onclick="applySheetSettings()" style="margin-top: 10px; width:100%;" data-lang-key="applyAndSaveBtn">рд▓рд╛рдЧреВ рдХрд░реЗрдВ рдФрд░ рд╕реЗрд╡ рдХрд░реЗрдВ</button>
        </div>
    </div>

    <div id="historyModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeHistoryModal()">├Ч</span>
            <h2 data-lang-key="historyTitle">рд╣рд┐рд╕реНрдЯреНрд░реА</h2>
            <ul id="historyList"></ul>
            <p><small data-lang-key="historyNote">рдиреЛрдЯ: рдпрд╣ рдХреЗрд╡рд▓ рдкрд┐рдЫрд▓реЗ рдХреБрдЫ рдмрджрд▓рд╛рд╡реЛрдВ рдХреЛ рджрд┐рдЦрд╛рддрд╛ рд╣реИред рдХрд┐рд╕реА рдЖрдЗрдЯрдо рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░рдХреЗ рдЙрд╕реЗ рд▓реЛрдб рдХрд░реЗрдВред</small></p>
        </div>
    </div>

    <div id="projectManagementModal" class="modal">
        <div class="project-modal-content">
            <span class="close-button" onclick="closeProjectManagementModal()">├Ч</span>
            <h2 data-lang-key="projectManagementTitle">рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореИрдиреЗрдЬрдореЗрдВрдЯ</h2>
            <div class="projects-group">
                <h3 data-lang-key="saveCurrentProjectTitle">рд╡рд░реНрддрдорд╛рди рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд╕реЗрд╡ рдХрд░реЗрдВ</h3>
                <label for="projectNameInput" data-lang-key="projectNameLabel">рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХрд╛ рдирд╛рдо:</label>
                <input type="text" id="projectNameInput" data-lang-placeholder="projectNamePlaceholder">
                <button onclick="saveCurrentProject()" data-lang-key="saveProjectBtn">рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд╕реЗрд╡ рдХрд░реЗрдВ</button>
            </div>
            <div class="projects-group">
                <h3 data-lang-key="savedProjectsTitle">рд╕реЗрд╡ рдХрд┐рдП рдЧрдП рдкреНрд░реЛрдЬреЗрдХреНрдЯреНрд╕</h3>
                <ul id="projectList"></ul>
                <p id="noProjectsMessage" style="display:none;" data-lang-key="noProjectsSaved">рдХреЛрдИ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд╕реЗрд╡ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред</p>
            </div>
        </div>
    </div>

    <div id="offcutsLibraryModal" class="modal">
        <div class="offcuts-library-modal-content">
            <span class="close-button" onclick="closeOffcutsLibraryModal()">├Ч</span>
            <h2 data-lang-key="offcutsLibraryTitle">рдСрдлрдХрдЯ рд▓рд╛рдЗрдмреНрд░реЗрд░реА</h2>
            <div class="offcut-add-manual-group" style="padding: 10px; border: 1px solid #e0e0e0; border-radius: 5px; margin-bottom: 15px;">
                <h4 data-lang-key="addManualOffcutTitle" style="margin-top:0; margin-bottom:10px;">рдореИрдиреНрдпреБрдЕрд▓ рдСрдлрдХрдЯ рдЬреЛрдбрд╝реЗрдВ</h4>
                <div style="display:flex; gap:10px; align-items: flex-end;">
                    <div style="flex-grow:1;">
                        <label for="manualOffcutWidth"><span data-lang-key="offcutWidthLabel">рдЪреМрдбрд╝рд╛рдИ</span> (<span class="unit-display">cm</span>):</label>
                        <input type="number" id="manualOffcutWidth" placeholder="0" step="any" style="margin-bottom:5px;">
                    </div>
                    <div style="flex-grow:1;">
                        <label for="manualOffcutLength"><span data-lang-key="offcutLengthLabel">рд▓рдВрдмрд╛рдИ</span> (<span class="unit-display">cm</span>):</label>
                        <input type="number" id="manualOffcutLength" placeholder="0" step="any" style="margin-bottom:5px;">
                    </div>
                    <div style="flex-grow:1;">
                        <label for="manualOffcutSourceName" data-lang-key="offcutSourceNameLabel">рд╕реНрд░реЛрдд (рд╡реИрдХрд▓реНрдкрд┐рдХ):</label>
                        <input type="text" id="manualOffcutSourceName" data-lang-placeholder="offcutSourcePlaceholder" style="margin-bottom:5px;">
                    </div>
                    <button onclick="addManualOffcut()" data-lang-key="addManualOffcutBtn" style="padding: 10px 15px; height: 40px; margin-bottom:5px;">рдЬреЛрдбрд╝реЗрдВ</button>
                </div>
            </div>
            <hr style="margin: 15px 0;">
            <div id="offcutsListContainer">
            </div>
            <div id="offcutsLibraryTotalSummary"></div>
            <p id="noOffcutsMessageModal" style="display:none;"></p>
        </div>
    </div>

    <script type="module" src="js/main.js"></script>
</body>
</html>
